<project>

    <target name="clean">
        <delete dir="build"/>
    </target>

    <target name="OSXcompile">
        <mkdir dir="build/classes"/>
        <mkdir dir="build/classes/OSX"/>
        <javac 
            sourcepath=""
            srcdir="src/base:src/OSX"
            destdir="build/classes/OSX"
            source="1.5"
        />
    </target>

    <target name="standardcompile">
        <mkdir dir="build/classes"/>
        <mkdir dir="build/classes/standard"/>
        <javac 
            sourcepath=""
            srcdir="src/base:src/standard"
            destdir="build/classes/standard"
            source="1.5"
        />
    </target>
    
    <target name="basejar">
        <mkdir dir="build/jar"/>
        <jar destfile="build/jar/base.jar" 
             basedir="extras"
             includes = "**/*.jpg **/*.gif"
             >
        </jar>
    </target>
    
    <target name="OSX.jar" depends="basejar,OSXcompile">
        <mkdir dir="build/jar/OSX"/>
        <copy file="build/jar/base.jar" tofile="build/jar/OSX/Jape.jar"/>
        <jar destfile="build/jar/OSX/Jape.jar" 
             basedir="build/classes/OSX"
             includes = "**/*.class"
             update="yes"
             duplicate="fail"
             >
            <manifest>
                <attribute name="Main-Class" value="uk.org.jape.Jape"/>
            </manifest>
        </jar>
    </target>
    
    <target name="Jape.jar" depends="basejar,standardcompile">
        <mkdir dir="build/jar/standard"/>
        <copy file="build/jar/base.jar" tofile="build/jar/standard/Jape.jar"/>
        <jar destfile="build/jar/standard/Jape.jar" 
             basedir="build/classes/standard"
             includes = "**/*.class"
             update="yes"
             duplicate="fail"
             >
            <manifest>
                <attribute name="Main-Class" value="uk.org.jape.Jape"/>
            </manifest>
        </jar>
    </target>
    
    <target name="run" depends="Jape.jar">
        <java jar="build/jar/standard/Jape.jar" fork="true"/>
    </target>

</project>
