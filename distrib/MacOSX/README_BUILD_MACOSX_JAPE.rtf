{\rtf1\ansi\ansicpg1252\cocoartf949\cocoasubrtf460
{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\fmodern\fcharset0 Courier;\f2\froman\fcharset0 TimesNewRomanPSMT;
}
{\colortbl;\red255\green255\blue255;}
\paperw11900\paperh16840\margl1440\margr1440\vieww13820\viewh15600\viewkind0
\deftab720
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\qc

\f0\b\fs36 \cf0 How to build Jape on Mac OS X
\b0\fs24 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ql\qnatural
\cf0 \
0. 
\b Software version problems\

\b0 Japes built on Leopard (OS X 10.5) won't run on Tiger (OS X 10.4). Currently I build Jape on Leopard. The OCaml website says that OCaml 3.10 and 3.11 won't run on Tiger, but Bernard Sufrin says he just built Jape on Tiger with 3.10. The build process will now work with OCaml 3.09 (which definitely does work on Tiger). The Tiger Jape will run on Leopard. (2009/03/11).\
\
1. Install the developer tools (get them from Apple or from a CD).\
\
\pard\tx426\tx1133\tx1320\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li1320\fi-820\ri0\ql\qnatural
\cf0 1a. Make sure ant (installed by the developer tools) is known to the shell (and why Apple doesn't do this, I don't know). I added the following lines to ~/.profile:\
\pard\tx426\tx1133\tx1320\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li1320\fi-400\ri0\ql\qnatural
\cf0 \
\pard\tx426\tx1133\tx1320\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li1320\fi-400\ri0\ql\qnatural

\f1 \cf0 ## ant variables added by richard 13/ii/2008 start\
## Do not remove the previous line\
PATH="$PATH:/usr/share/ant/bin"\
export PATH\
ANTHOME="/usr/share/ant"\
export ANTHOME\
JAVA_HOME="/Library/Java/Home"\
export JAVA_HOME\
## Do not remove the next line\
## ant variables added by richard 13/ii/2008 end\
\pard\tx426\tx1133\tx1320\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li1320\fi-400\ri0\ql\qnatural

\f0 \cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ql\qnatural
\cf0 \
2. Install the latest OCaml to build the jape \'91engine\'92 (at time of writing, Jape is built using ocaml 3.10, but no doubt 3.11 would work just as well).\
\
3. Get jarbundler, an ant task, to put the parts together and make a Mac OS X application. It's on sourceforge but the latest version is always available from the developer at http://informagen.com/JarBundler/ (sorry, don't know how to make that a hyperlink in TextEdit!). Follow the instructions and put jarbundler-?.?.?.jar in /usr/share/ant/lib.\
\
4. In the directory where you found this file (japesource/MacOSX):\
   \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\fi660\ri0\ql\qnatural

\f2 \cf0    
\f1 make local 
\f2 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\fi660\ri-2800\ql\qnatural

\f0 \cf0    -- builds the engine and the GUI interface, bundles them together and puts them in ./build/Jape.app\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\fi660\ri0\ql\qnatural
\cf0 \
   
\f1 make run
\f0 \
   -- to try it out. If it works, move build/Jape.app where you like\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ql\qnatural
\cf0 \
5. If you want to make a version that runs on PowerPC and on Intel, you have to do a bit more.\
\
\pard\tx1657\tx2224\tx2791\tx3358\tx3925\tx4492\tx5059\tx5626\tx6193\tx6760\tx7327\tx7894\pardeftab720\li1091\fi-545\ri0\ql\qnatural
\cf0 5a. You have to be running on an Intel Mac, and you need two copies of Ocaml, as follows.\
\
5b. First install the PPC Ocaml (it will overwrite the one you already have, if any, but don't worry).\
\
5c. Squirrel away two parts of it:\
\pard\tx1657\tx2224\tx2791\tx3358\tx3925\tx4492\tx5059\tx5626\tx6193\tx6760\tx7327\tx7894\pardeftab720\li1091\fi-545\ri-1540\ql\qnatural

\f1 \cf0 	sudo mv /usr/local/bin/ocamlopt /usr/local/bin/ocamloptppc
\f0 \
\pard\tx1657\tx2224\tx2791\tx3358\tx3925\tx4492\tx5059\tx5626\tx6193\tx6760\tx7327\tx7894\pardeftab720\li1091\fi-545\ri0\ql\qnatural

\f1 \cf0 	sudo mv /usr/local/lib/ocaml /usr/local/lib/ocamlppc\
\pard\tx1657\tx2224\tx2791\tx3358\tx3925\tx4492\tx5059\tx5626\tx6193\tx6760\tx7327\tx7894\pardeftab720\li1091\fi-545\ri0\ql\qnatural

\f0 \cf0 \
5d. Now install the Intel OCaml. \
\
5e. 
\f1 make release
\f0  \
	will now do the business and give you a universal ./build/Jape.app.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ql\qnatural
\cf0 \
Richard Bornat\
richard@bornat.me.uk\
11th March 2009\
}