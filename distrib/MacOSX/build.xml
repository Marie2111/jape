<project>
    <!-- ../camlengine/_buildOSX/jape_engine must be built before Jape.app (see makefile) -->
    
    <taskdef name="jarbundler" 
         classname="net.sourceforge.jarbundler.JarBundler" />
    
    <target name="Jape.app">
        <mkdir dir="build"/>
        <jarbundler dir="build"
                    name="Jape"
                    mainclass="uk.org.jape.Jape"
                    jar="../java_GUI/build/jar/OSX/Jape.jar"
                    shortname="Jape"
                    icon="java_GUI/Jape.icns"
                    version="7"
                    >
            <javaproperty name="apple.laf.useScreenMenuBar" value="true"/>
            <javaproperty name="apple.awt.showGrowBox"      value="true"/>
            <javaproperty name="apple.awt.antialiasing"     value="true"/>
            <javaproperty name="apple.awt.rendering"        value="quality"/>
            <javaproperty name="uk.org.jape.AppPackage"     value="$APP_PACKAGE"/>
            <documenttype name="Jape Theory"
                                extensions= "jt,j,jp" 
                                ostypes=    "****" 
                                iconfile=   "java_GUI/Jape.icns"
                                role=       "None"/>
        </jarbundler>
            
        <!-- next bit deleted for 10.5 release 2
        <delete file="build/Jape.app/Contents/MacOS/JavaApplicationStub"/>
        <exec executable="ln">
            <arg line="-s /System/Library/Frameworks/JavaVM.framework/Resources/MacOS/JavaApplicationStub"/>
            <arg value="build/Jape.app/Contents/MacOS/JavaApplicationStub"/>
        </exec>
         -->
        <mkdir dir="build/Jape.app/Contents/Engine"/>
        <copy file="../camlengine/_buildOSX/jape_engine" tofile="build/Jape.app/Contents/Engine/jape_engine"/>
        <exec executable="chmod">
            <arg value="755"/>
            <arg value="build/Jape.app/Contents/Engine/jape_engine"/>
        </exec>
    </target>
    
    <target name="clean">
        <delete dir="build"/>
    </target>
    
    <target name="run">
        <exec executable="open">
            <arg value="build/Jape.app"/>
        </exec>
    </target>
</project>



